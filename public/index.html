<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Sprinkles</title>
  <link href='http://fonts.googleapis.com/css?family=Abel' rel='stylesheet' type='text/css'>
  <style>
    html {
      font-family: 'Abel', sans-serif;
    }
  </style>
  <!-- <link rel="stylesheet" href="style.css"> -->

</head>
<body>
  <h1>Sprinkle the world with music</h1>
  <form>
    <input id="nickInput" type="text" placeholder="Your last.fm nick">
    <!-- <input type="range" 1w, 1mo, 3, 6, 12, overall> -->
    <button id="getButton">GET</button>
  </form>

  <div>
  <h2>Resultat</h2>
  <ul id="artists"></ul>
  </div>

  <script>
  var apiUrl = '/api/';
  var artistsHolder = document.getElementById('artists');
  var nickInput = document.getElementById('nickInput');
  var getButton = document.getElementById('getButton');


  var plotIt = function(artists){
    artistsHolder.innerHTML = '';

    artists.forEach(function(artist){
      var li = document.createElement('li');
      li.innerHTML = artist.artist + ' - ' + artist.country;
      artistsHolder.appendChild(li);
    })
  };

  var fetchData = function(event){
    event.preventDefault();
    var nick = nickInput.value || 'eshuu';

    fetch(apiUrl + nick).then(function(a){
      return a.json();
    }).then(function(b){
      plotIt(b);
    });
  };

  getButton.addEventListener('click', fetchData);

  </script>
</body>
</html>